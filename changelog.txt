test: add comprehensive tests for hub error re-throwing

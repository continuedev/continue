---
title: "AI-Powered Database Management with Supabase MCP"
description: "Build an intelligent database workflow that uses Supabase MCP to query data, analyze patterns, and automate schema migrations with AI assistance."
sidebarTitle: "Supabase AI Database Workflow with MCP"
---

<Card title="What You'll Build" icon="database">
  An AI-powered database management system that uses Continue CLI with Supabase MCP to analyze your database schema, optimize queries, generate migrations, and provide intelligent insights about your data.
</Card>

## What You'll Learn

This cookbook teaches you to:

- Use [Supabase MCP](https://supabase.com/docs/guides/getting-started/mcp) to interact with your database
- Analyze database performance and suggest optimizations with AI
- Generate database migrations and schema changes automatically
- Set up automated database health monitoring with GitHub Actions

## Prerequisites

Before starting, ensure you have:

- [Supabase account](https://supabase.com) with an active project
- Node.js 18+ installed locally
- [Continue CLI](https://docs.continue.dev/guides/cli) with **active credits** (required for API usage)
- Basic understanding of SQL and database concepts

<Steps>
  <Step title="Install Continue CLI">
    ```bash
    npm i -g @continuedev/cli
    ```
  </Step>

  <Step title="Set up Continue CLI Account & API Key">
    1. Visit [Continue Organizations](https://hub.continue.dev/settings/organizations)
    2. Sign up or log in to your Continue account
    3. Navigate to your organization settings
    4. Click **"API Keys"** and then **"+ New API Key"**
    5. Copy the API key immediately (you won't see it again!)
    6. Login to the CLI: `cn login`
  </Step>
</Steps>

<Tip>
  Continue CLI can analyze your database schema and generate complex SQL queries - you just need to describe what you want in plain language!
</Tip>

## Step 1: Set Up Your Credentials

First, you'll need to set up access to your Supabase project.

<Tabs>
  <Tab title="Configure Supabase MCP">

    <Warning>
      **Security First**: Follow [Supabase's security best practices](https://supabase.com/docs/guides/getting-started/mcp#security-risks) when using MCP:
      - Never connect to production databases directly
      - Use development or staging environments
      - Enable read-only mode when possible
      - Scope MCP access to specific projects
    </Warning>

    The Supabase MCP supports OAuth authentication for secure access:

    **OAuth Configuration (Recommended)**

    The Supabase MCP will prompt for OAuth authentication when first used. Simply follow the authorization flow.

    **Remote MCP URL**
    ```
    https://mcp.supabase.com/mcp
    ```

    <Info>
      The MCP server can be scoped to a specific project for better security. Configure this during setup.
    </Info>

  </Tab>
  <Tab title="Supabase Project Setup">
    To use Supabase MCP effectively, ensure your project has:

    1. **Development Environment** - Create a separate development project:
       - Go to [Supabase Dashboard](https://supabase.com/dashboard)
       - Create a new project for development/testing
       - Copy the project URL and anon key

    2. **Database Schema** - Set up some initial tables for testing:
       ```sql
       -- Example schema for testing
       CREATE TABLE users (
         id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
         email TEXT UNIQUE NOT NULL,
         created_at TIMESTAMPTZ DEFAULT NOW()
       );

       CREATE TABLE posts (
         id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
         user_id UUID REFERENCES users(id),
         title TEXT NOT NULL,
         content TEXT,
         published BOOLEAN DEFAULT false,
         created_at TIMESTAMPTZ DEFAULT NOW()
       );
       ```

    3. **Row Level Security (RLS)** - Enable RLS for security:
       ```sql
       ALTER TABLE users ENABLE ROW LEVEL SECURITY;
       ALTER TABLE posts ENABLE ROW LEVEL SECURITY;
       ```

    <Tip>
      Use [Supabase Branching](https://supabase.com/docs/guides/deployment/branching) to create isolated development branches for safe testing.
    </Tip>

  </Tab>
</Tabs>

## Supabase Database Workflow Options

<Card title="Fastest Path to Success" icon="rocket">
  Skip the manual setup and use our pre-built Supabase Continuous AI agent that includes
  optimized prompts, rules, and the Supabase MCP for intelligent database management.
</Card>

<Info>
  **How Supabase MCP Works**:
  - Connects to your Supabase project via OAuth
  - Provides tools for database queries, schema inspection, and migrations
  - Supports read-only mode for safer operations
  - Can be scoped to specific projects for security
</Info>

<Tabs>
  <Tab title="âš¡ Quick Start (Recommended)">
    **Perfect for:** Immediate database analysis with AI-powered query optimization and schema insights

    <Steps>
      <Step title="Add the Pre-Built Agent">
        Visit the [Supabase Continuous AI Agent](https://hub.continue.dev/continuedev/supabase-continuous-ai) on Continue Hub and click **"Install Agent"** or run:
        
        ```bash
        cn --config continuedev/supabase-continuous-ai
        ```

        This agent includes:
        - **Optimized prompts** for database analysis and query generation
        - **Built-in rules** for SQL best practices and security
        - **[Supabase MCP](https://supabase.com/docs/guides/getting-started/mcp)** for secure database access
        - **Automatic authentication** via OAuth flow
      </Step>

      <Step title="Run Database Analysis">
        Navigate to your project directory and enter this prompt in the Continue CLI TUI:
        
        ```
        Analyze my Supabase database schema and suggest performance optimizations
        ```

        That's it! The agent handles everything automatically.
      </Step>
    </Steps>

    <Info>
      **Why Use the Agent?** Get consistent results with pre-tested prompts and built-in SQL optimization rules.
    </Info>

  </Tab>

  <Tab title="ðŸ› ï¸ Manual Setup">
    <Steps>
      <Step title="Add Supabase MCP to Continue CLI">
        Configure the [Supabase MCP](https://supabase.com/docs/guides/getting-started/mcp) using OAuth:

        The MCP server will automatically prompt for OAuth authentication when you first use it.
      </Step>

      <Step title="Verify Supabase Connection">
        Test your Supabase MCP connection with this prompt:
        
        ```
        List all tables in my Supabase database
        ```
      </Step>

      <Step title="Create Custom Database Analysis Prompts">
        Use this prompt template with Continue CLI to analyze your database:

        ```
        Analyze my Supabase database:
        - List all tables with row counts
        - Identify tables without indexes
        - Find potential N+1 query patterns
        - Suggest missing foreign key constraints
        - Recommend index optimizations based on table structure
        - Generate SQL migrations for suggested improvements
        - Check for security issues (missing RLS policies)
        ```
      </Step>
    </Steps>

  </Tab>
</Tabs>

<Accordion title="Agent Requirements">
  To use the pre-built agent, you need either:
  - **Continue CLI Pro Plan** with the models add-on, OR
  - **Your own API keys** added to Continue Hub secrets
  
  The agent will automatically detect and use your configuration. For Supabase MCP:
  - **Supabase account** with at least one project
  - **OAuth authentication** (handled automatically)
  - Development or staging environment (not production)
</Accordion>

---

<Warning>
  **Security Best Practices**: 
  - **Never use MCP with production databases** - Always use development or staging environments
  - **Enable read-only mode** when analyzing data to prevent accidental modifications
  - **Scope to specific projects** to limit access
  - **Use branch databases** for testing schema changes
</Warning>

## Step 2: Analyze Your Database with AI

Use Continue CLI to perform intelligent database analysis. Enter these prompts in the Continue CLI TUI:

<Tabs>
  <Tab title="Schema Analysis">
    **Prompt:**
    ```
    Analyze my Supabase database schema and provide:
    - Complete table structure with data types
    - Relationships between tables
    - Missing indexes that could improve performance
    - Unused or redundant columns
    - Suggestions for normalization improvements
    ```
  </Tab>

  <Tab title="Query Optimization">
    **Prompt:**
    ```
    Help me optimize this query for better performance:
    [paste your slow query here]
    
    Provide:
    - Execution plan analysis
    - Index recommendations
    - Query rewrite suggestions
    - Estimated performance improvement
    ```
  </Tab>

  <Tab title="Data Insights">
    **Prompt:**
    ```
    Analyze the data in my 'users' and 'posts' tables:
    - User growth trends over time
    - Most active users by post count
    - Publishing patterns (draft vs published)
    - Data quality issues (nulls, duplicates)
    - Interesting correlations in the data
    ```
  </Tab>
</Tabs>

<Info>
  **Available Supabase MCP Capabilities**:
  - **Database Queries**: Execute SQL queries and analyze results
  - **Schema Inspection**: View table structures, relationships, and constraints
  - **Performance Analysis**: Identify slow queries and optimization opportunities
  - **Security Review**: Check RLS policies and access controls
  - **Migration Generation**: Create SQL migrations for schema changes
</Info>

## Step 3: Generate Database Migrations

Create and apply database migrations based on AI recommendations. Enter this prompt in the Continue CLI TUI:

**Prompt:**
```
Based on the database analysis, generate SQL migrations to:
1. Add missing indexes for foreign keys
2. Create composite indexes for common query patterns
3. Add check constraints for data validation
4. Update RLS policies for better security
5. Create database functions for complex operations

For each migration:
- Provide the SQL code
- Explain the performance or security benefit
- Include rollback statements
- Add comments for documentation
```

<Tip>
  **Best Practice**: Always review AI-generated migrations before applying them. Test in a development branch first using Supabase's branching feature.
</Tip>

## Step 4: Set Up Automated Database Monitoring

Automate database health checks with Continue CLI and GitHub Actions:

```yaml
name: Database Health Monitor

on:
  schedule:
    # Run daily at 2 AM UTC
    - cron: "0 2 * * *"
  workflow_dispatch: # Allow manual triggers

jobs:
  monitor-database:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4
        with:
          node-version: "22"

      - name: Install Continue CLI
        run: |
          npm install -g @continuedev/cli
          echo "âœ… Continue CLI installed"

      - name: Analyze Database Health
        env:
          CONTINUE_API_KEY: ${{ secrets.CONTINUE_API_KEY }}
        run: |
          echo "ðŸ” Analyzing database health..."
          
          # Use Continue CLI to analyze database and generate report
          cn -p "Using Supabase MCP, perform a comprehensive database health check:
                 1. Check table sizes and growth rates
                 2. Identify slow queries from the past 24 hours
                 3. Find tables without proper indexes
                 4. Review RLS policies for security gaps
                 5. Check for data integrity issues
                 6. Analyze connection pool usage
                 7. Generate a health report with:
                    - Critical issues requiring immediate attention
                    - Performance optimization opportunities
                    - Security recommendations
                    - Suggested migrations for improvements
                    - Metrics compared to last check
                 
                 Format the output as a markdown report suitable for GitHub issues.
                 If critical issues are found, create a GitHub issue with details."

      - name: Save Health Report
        run: |
          echo "## ðŸ“Š Database Health Report" >> $GITHUB_STEP_SUMMARY
          echo "Generated at $(date)" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "Check the 'Analyze Database Health' step for the full report" >> $GITHUB_STEP_SUMMARY

      - name: Upload Health Report
        uses: actions/upload-artifact@v4
        with:
          name: database-health-report
          path: |
            *.md
            *.sql
```

<Warning>
  **Required GitHub Secrets**:
  - `CONTINUE_API_KEY`: Your Continue API key from [hub.continue.dev/settings/api-keys](https://hub.continue.dev/settings/api-keys)

  Add this at: **Repository Settings â†’ Secrets and variables â†’ Actions**
</Warning>

## What You've Built

After completing this guide, you have a complete **AI-powered database management system** that:

- **Analyzes schema design** - Identifies optimization opportunities and best practices
- **Optimizes queries** - Suggests indexes and query rewrites for better performance
- **Generates migrations** - Creates SQL code for schema improvements
- **Monitors health** - Runs automated checks for performance and security issues
- **Provides insights** - Delivers actionable recommendations based on data patterns

<Card title="Continuous AI Database Management" icon="shield-check">
  Your system now operates at **[Level 2 Continuous AI](https://blog.continue.dev/what-is-continuous-ai-a-developers-guide/)** - AI handles routine database analysis and optimization with human oversight for migration approval.
</Card>

## Advanced Database Prompts

Enhance your workflow with these advanced Continue CLI prompts:

<CardGroup cols={2}>
  <Card title="Real-time Performance" icon="gauge">
    Monitor query performance in real-time and get alerts for slow queries exceeding threshold times
  </Card>
  <Card title="Data Quality Checks" icon="check-circle">
    Automatically validate data integrity, find duplicates, and ensure consistency across related tables
  </Card>
  <Card title="Access Pattern Analysis" icon="chart-line">
    Analyze API logs to understand data access patterns and optimize indexes accordingly
  </Card>
  <Card title="Cost Optimization" icon="dollar-sign">
    Review database usage and suggest ways to reduce costs while maintaining performance
  </Card>
</CardGroup>

## Security Best Practices

<Warning>
  **Database Security Guidelines**:
  - Always use development/staging environments with MCP
  - Enable read-only mode for analysis tasks
  - Never store production credentials in code
  - Review all AI-generated SQL before execution
  - Use RLS policies to enforce access control
  - Regularly audit database permissions
</Warning>

## Troubleshooting

### Supabase MCP Connection Issues

If you encounter connection issues:

1. Verify OAuth authentication is complete
2. Check your Supabase project is accessible
3. Ensure you're not connecting to a production database
4. Verify the MCP URL is correct: `https://mcp.supabase.com/mcp`

### Common Database Analysis Issues

| Issue | Solution |
|:------|:---------|
| No tables found | Verify your database has tables created |
| Permission denied | Check OAuth scopes and project permissions |
| Slow query analysis | Ensure your database has query logs enabled |
| Migration failures | Test migrations in a branch database first |

## Next Steps

- Set up [Supabase Edge Functions](https://supabase.com/docs/guides/functions) for automated workflows
- Configure [Supabase Realtime](https://supabase.com/docs/guides/realtime) for live data monitoring
- Implement [Database Webhooks](https://supabase.com/docs/guides/database/webhooks) for event-driven automation
- Join the [Continue Discord](https://discord.gg/continue) for support

## Resources

- [Supabase MCP Documentation](https://supabase.com/docs/guides/getting-started/mcp)
- [Supabase Database Guide](https://supabase.com/docs/guides/database)
- [Supabase Security Best Practices](https://supabase.com/docs/guides/database/security)
- [Model Context Protocol Docs](https://modelcontextprotocol.io/introduction)
- [Continue CLI Guide](https://docs.continue.dev/guides/cli)
- [Continuous AI Best Practices](https://blog.continue.dev/what-is-continuous-ai-a-developers-guide/)
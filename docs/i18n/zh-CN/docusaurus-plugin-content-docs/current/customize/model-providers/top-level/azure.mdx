---
title: Azure AI Foundry
slug: ../azure
---

import TabItem from "@theme/TabItem";
import Tabs from "@theme/Tabs";

Azure AI Foundry 是一个基于云的服务，提供对 OpenAI, Mistral AI 和其他模型的访问，集成微软 Azure 平台的安全和企业特性。为了开始，在 [Azure portal](https://portal.azure.com) 中，创建一个 Azure AI Foundry 资源。

:::info

对于 OpenAI 模型设置的细节，查看 [Azure OpenAI 服务配置](#azure-openai-服务配置) 。

:::

## 聊天模型

我们推荐配置 **GPT-4o** 作为你的聊天模型。

<Tabs groupId="config-example">
  <TabItem value="yaml" label="YAML">
  ```yaml title="config.yaml"
  models:
    - name: GPT-4o
      provider: azure
      model: gpt-4o
      apiBase: <YOUR_DEPLOYMENT_BASE>
      apiKey: <YOUR_AZURE_API_KEY> # If you use subscription key, try using Azure gateway to rename it apiKey
      env:
        deployment: <YOUR_DEPLOYMENT_NAME>
        apiType: azure-foundry # Or "azure-openai" if using OpenAI models
  ```
  </TabItem>
  <TabItem value="json" label="JSON">
  ```json title="config.json"
  {
    "models": [{
        "title": "GPT-4o",
        "provider": "azure",
        "model": "gpt-4o",
        "apiBase": "<YOUR_DEPLOYMENT_BASE>",
        "deployment": "<YOUR_DEPLOYMENT_NAME>",
        "apiKey": "<YOUR_AZURE_API_KEY>", // If you use subscription key, try using Azure gateway to rename it apiKey
        "apiType": "azure-foundry" // Or "azure-openai" if using OpenAI models
    }]
  }
  ```
  </TabItem>
</Tabs>

## 自动补全模型

我们推荐配置 **Codestral** 作为你的自动补全模型。

<Tabs groupId="config-example">
	<TabItem value="yaml" label="YAML">
	```yaml title="config.yaml"
  models:
    - name: Codestral
      provider: mistral
      model: codestral-latest
      roles:
        - autocomplete
  ```
  </TabItem>
  <TabItem value="json" label="JSON">
  ```json title="config.json"
  {
    "tabAutocompleteModel": {
      "title": "Codestral",
      "provider": "mistral",
      "model": "codestral-latest"
    }
  }
  ```
  </TabItem>
</Tabs>

## 嵌入模型

我们推荐配置 **text-embedding-3-large** 作为你的嵌入模型。

<Tabs groupId="config-example">
    <TabItem value="yaml" label="YAML">
    ```yaml title="config.yaml"
    models:
      - name: Text Embedding-3 Large
        provider: azure
        model: text-embedding-3-large
        apiBase: <YOUR_DEPLOYMENT_BASE>
        apiKey: <YOUR_AZURE_API_KEY>
        env:
          deployment: <YOUR_DEPLOYMENT_NAME>
          apiType: azure
    ```
    </TabItem>
    <TabItem value="json" label="JSON">
    ```json title="config.json"
    {
      "embeddingsProvider": {
        "provider": "azure",
        "model": "text-embedding-3-large",
        "apiBase": "<YOUR_DEPLOYMENT_BASE>",
        "deployment": "<YOUR_DEPLOYMENT_NAME>",
        "apiKey": "<YOUR_AZURE_API_KEY>",
        "apiType": "azure-foundry" // Or "azure-openai" if using OpenAI models
      }
    }
    ```
    </TabItem>
</Tabs>

## 重排序模型

Azure OpenAI 当前没有提供任何重排序模型。

[点击这里](../../model-roles/reranking.mdx) 查看重排序模型列表。

## 隐私

如果你想要使用 OpenAI 模型，但是担心隐私问题，你可以使用 Azure OpenAI 服务，它是符合 GDPR 和 HIPAA 的。

:::info[获取访问]

[点击这里](https://azure.microsoft.com/en-us/products/ai-services/openai-service) 申请访问 Azure OpenAI 服务。响应时间通常是几天。

:::

## Azure OpenAI 服务配置

Azure OpenAI 服务需要配置一些额外的参数，例如部署名称和 API 基础 URL 。

要在 _Azure AI Foundry_ 查找这个信息，首先选择你想要连接的模型。然后访问 _Endpoint_ > _Target URI_ 。

例如， Target URI `https://just-an-example.openai.azure.com/openai/deployments/gpt-4o-july/chat/completions?api-version=2023-03-15-preview` 匹配以下配置：

<Tabs groupId="config-example">
	<TabItem value="yaml" label="YAML">
    ```yaml title="config.yaml"
    models:
      - name: GPT-4o Azure
        model: gpt-4o
        provider: openai
        apiBase: https://just-an-example.openai.azure.com
        apiKey: <YOUR_AZURE_API_KEY>
        env:
          apiVersion: 2023-03-15-preview
          deployment: gpt-4o-july
          apiType: azure-openai
    ```
  </TabItem>
  <TabItem value="json" label="JSON">
    ```json title="config.json"
    {
      "title": "GPT-4o Azure",
      "model": "gpt-4o",
      "provider": "openai",
      "apiBase": "https://just-an-example.openai.azure.com",
      "deployment": "gpt-4o-july",
      "apiVersion": "2023-03-15-preview",
      "apiKey": "<YOUR_AZURE_API_KEY>",
      "apiType": "azure-openai"
    }
    ```
  </TabItem>
</Tabs>
